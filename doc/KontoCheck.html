<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Module: KontoCheck</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./lib/konto_check_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/konto_check.rb">lib/konto_check.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-bank_aenderung">::bank_aenderung</a></li>
					
					<li><a href="#method-c-bank_alles">::bank_alles</a></li>
					
					<li><a href="#method-c-bank_bic">::bank_bic</a></li>
					
					<li><a href="#method-c-bank_filialen">::bank_filialen</a></li>
					
					<li><a href="#method-c-bank_loeschung">::bank_loeschung</a></li>
					
					<li><a href="#method-c-bank_nachfolge_blz">::bank_nachfolge_blz</a></li>
					
					<li><a href="#method-c-bank_name">::bank_name</a></li>
					
					<li><a href="#method-c-bank_name_kurz">::bank_name_kurz</a></li>
					
					<li><a href="#method-c-bank_nr">::bank_nr</a></li>
					
					<li><a href="#method-c-bank_ort">::bank_ort</a></li>
					
					<li><a href="#method-c-bank_pan">::bank_pan</a></li>
					
					<li><a href="#method-c-bank_plz">::bank_plz</a></li>
					
					<li><a href="#method-c-bank_pz">::bank_pz</a></li>
					
					<li><a href="#method-c-bank_valid">::bank_valid</a></li>
					
					<li><a href="#method-c-bank_valid%3F">::bank_valid?</a></li>
					
					<li><a href="#method-c-current_init_level">::current_init_level</a></li>
					
					<li><a href="#method-c-current_lutfile_name">::current_lutfile_name</a></li>
					
					<li><a href="#method-c-current_lutfile_set">::current_lutfile_set</a></li>
					
					<li><a href="#method-c-dump_lutfile">::dump_lutfile</a></li>
					
					<li><a href="#method-c-encoding">::encoding</a></li>
					
					<li><a href="#method-c-encoding_str">::encoding_str</a></li>
					
					<li><a href="#method-c-free">::free</a></li>
					
					<li><a href="#method-c-generate_lutfile">::generate_lutfile</a></li>
					
					<li><a href="#method-c-iban2bic">::iban2bic</a></li>
					
					<li><a href="#method-c-iban_check">::iban_check</a></li>
					
					<li><a href="#method-c-iban_gen">::iban_gen</a></li>
					
					<li><a href="#method-c-init">::init</a></li>
					
					<li><a href="#method-c-ipi_check">::ipi_check</a></li>
					
					<li><a href="#method-c-ipi_gen">::ipi_gen</a></li>
					
					<li><a href="#method-c-konto_check">::konto_check</a></li>
					
					<li><a href="#method-c-konto_check%3F">::konto_check?</a></li>
					
					<li><a href="#method-c-konto_check_pz">::konto_check_pz</a></li>
					
					<li><a href="#method-c-konto_check_pz%3F">::konto_check_pz?</a></li>
					
					<li><a href="#method-c-load_bank_data">::load_bank_data</a></li>
					
					<li><a href="#method-c-lut_info">::lut_info</a></li>
					
					<li><a href="#method-c-lut_info1">::lut_info1</a></li>
					
					<li><a href="#method-c-lut_info2">::lut_info2</a></li>
					
					<li><a href="#method-c-retval2dos">::retval2dos</a></li>
					
					<li><a href="#method-c-retval2html">::retval2html</a></li>
					
					<li><a href="#method-c-retval2iso">::retval2iso</a></li>
					
					<li><a href="#method-c-retval2txt">::retval2txt</a></li>
					
					<li><a href="#method-c-retval2txt_kurz">::retval2txt_kurz</a></li>
					
					<li><a href="#method-c-retval2txt_short">::retval2txt_short</a></li>
					
					<li><a href="#method-c-retval2utf8">::retval2utf8</a></li>
					
					<li><a href="#method-c-suche">::suche</a></li>
					
					<li><a href="#method-c-valid">::valid</a></li>
					
					<li><a href="#method-c-valid%3F">::valid?</a></li>
					
					<li><a href="#method-c-valid_pz">::valid_pz</a></li>
					
					<li><a href="#method-c-valid_pz%3F">::valid_pz?</a></li>
					
					<li><a href="#method-c-version">::version</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./KontoCheck.html">KontoCheck</a></li>
				
					<li><a href="./KontoCheckRaw.html">KontoCheckRaw</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">KontoCheck</h1>

		<div id="description">
			<p>
This is a C/Ruby library to check the validity of German Bank Account
Numbers. All currently defined test methods by Deutsche Bundesbank (April
2011: 00 to D8) are implemented. 
</p>
<p>
<b>ATTENTION:</b> There are a few important changes in the API between
version 0.0.2 (version by Peter Horn/Provideal), version 0.0.6 (jeanmartin)
and this version:
</p>
<ul>
<li><p>
The function <a
href="KontoCheck.html#method-c-load_bank_data">KontoCheck::load_bank_data()</a>
is no longer used; it is replaced by <a
href="KontoCheck.html#method-c-init">KontoCheck::init()</a> and <a
href="KontoCheck.html#method-c-generate_lutfile">KontoCheck::generate_lutfile()</a>.
</p>
</li>
<li><p>
The function <a
href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check</a>(blz,kto)
changed the order of parameters from (kto,blz) to (blz,kto)
</p>
</li>
</ul>
<p>
Another change affects only the version 0.0.6 by jeanmartin:
</p>
<ul>
<li><p>
In <a
href="KontoCheck.html#method-c-init">KontoCheck::init</a>(level,name,set)
the order of the two first parameters is now free; the order is determined
by the type of the variable (level is integer, filename string). 
</p>
</li>
</ul>
<p>
Because this class is inteded for german bank accounts, the rest of the
documentation is in german too.
</p>
<p>
Diese Bibliothek implementiert die Prüfziffertests für deutsche
Bankkonten. Die meisten Konten enthalten eine Prüfziffer; mit dieser kann
getestet werden, ob eine Bankleitzahl plausibel ist oder nicht. Auf diese
Weise können Zahlendreher oder Zifferverdopplungen oft festgestellt
werden. Es ist natürlich nicht möglich, zu bestimmen, ob ein Konto
wirklich existiert; dazu müßte jeweils eine Anfrage bei der Bank gemacht
werden ;-).
</p>
<p>
Die Bibliothek ist in zwei Teile gesplittet: <a
href="KontoCheckRaw.html">KontoCheckRaw</a> bildet die direkte
Schnittstelle zur C-Bibliothek und ist daher manchmal etwas sperrig; <a
href="KontoCheck.html">KontoCheck</a> ist dagegen mehr Ruby-artig
ausgelegt. <a href="KontoCheck.html">KontoCheck</a> gibt meist nur eine
Teilmenge von <a href="KontoCheckRaw.html">KontoCheckRaw</a> zurück, aber
(hoffentlich) die Teile, die man unmittelbar von den jeweiligen Funktionen
erwartet. Eine Reihe einfacher Funktionen sind auch in beiden Versionen
identisch.
</p>
<p>
Die Bankleitzahldaten werden in einem eigenen (komprimierten) Format in
einer sogenannten LUT-Datei gespeichert. Diese Datei läßt sich mit der
Funktion <a
href="KontoCheck.html#method-c-generate_lutfile">KontoCheck::generate_lutfile</a>
bzw. <a
href="KontoCheckRaw.html#method-c-generate_lutfile">KontoCheckRaw::generate_lutfile</a>
aus der Datei der Deutschen Bundesbank (online erhältlich unter <a
href="http://www.bundesbank.de/zahlungsverkehr/zahlungsverkehr_bankleitzahlen_download.php">www.bundesbank.de/zahlungsverkehr/zahlungsverkehr_bankleitzahlen_download.php</a>)
erzeugen. Die LUT-Datei hat den großen Vorteil, daß die Datenblocks (BLZ,
Prüfziffer, Bankname, Ort, &#8230;) unabhängig voneinander gespeichert
sind; jeder Block kann für sich geladen werden. In einer Datei können
zwei Datensätze der Bundesbank mit unterschiedlichem Gültigkeitsdatum
enthalten sein. Wenn bei der Initialisierung kein bestimmter Datensatz
ausgewählt wird, prüft die Bibliothek aufgrund des mit jedem Datensatz
gespeicherten Gültigkeitszeitraums welcher Satz aktuell gültig ist und
lädt diesen dann in den Speicher.
</p>
<p>
Numerische Werte (z.B. Bankleitzahlen, Kontonummern, PLZ,&#8230;) können
als Zahlwerte oder als String angegeben werden; sie werden automatisch
konvertiert. Prüfziffermethoden können ebenfalls als Zahl oder String
angegeben werden; die Angabe als Zahl ist allerdings nicht immer eindeutig.
So kann z.B. 131 sowohl für D1 als auch 13a stehen; daher ist es besser,
die Prüfziffermethode als String anzugeben (in diesem Beispiel würde 131
als 13a interpretiert).
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="SEARCH_KEYS">SEARCH_KEYS</a></dt>
				
				<dd class="description"><p>
mögliche Suchschlüssel für die Funktion <a
href="KontoCheck.html#method-c-suche">KontoCheck::suche()</a>
</p>
<p>
:ort, :plz, :pz, :bic, :blz, :namen, :namen_kurz
</p></dd>
				
			
				<dt><a name="SEARCH_KEY_MAPPINGS">SEARCH_KEY_MAPPINGS</a></dt>
				
				<dd class="description"><p>
Aliasnamen für einige Suchschlüssel der Funktion <a
href="KontoCheck.html#method-c-suche">KontoCheck::suche()</a>
</p>
<p>
:bankleitzahl, :city, :zip, :name, :kurzname, :shortname, :pruefziffer
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="bank-aenderung-method" class="method-detail ">
				<a name="method-c-bank_aenderung"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_aenderung</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_aenderung">KontoCheck::bank_aenderung</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_aenderung">KontoCheckRaw::bank_aenderung</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert das  &#8217;Änderung&#8217; Flag einer Bank (als
string). Mögliche Werte sind: A (Addition), M (Modified), U (Unchanged), D
(Deletion).
</p>
					

					
					<div class="method-source-code"
						id="bank-aenderung-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 726</span>
726:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_aenderung</span>(*<span class="ruby-identifier">args</span>)
727:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_aenderung</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
728:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-alles-method" class="method-detail ">
				<a name="method-c-bank_alles"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_alles</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_alles">KontoCheck::bank_alles</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_alles">KontoCheckRaw::bank_alles</a>(blz [,filiale])</tt></h5>
<p>
Dies ist eine Mammutfunktion, die alle vorhandenen Informationen über eine
Bank zurückliefert. Das Ergebnis ist ein Array mit den folgenden
Komponenten:
</p>
<pre>
   0:  Statuscode
   1:  Anzahl Filialen
   2:  Name
   3:  Kurzname
   4:  PLZ
   5:  Ort
   6:  PAN
   7:  BIC
   8:  Prüfziffer
   9:  Laufende Nr.
   10: Änderungs-Flag
   11: Löeschung-Flag
   12: Nachfolge-BLZ
</pre>
<p>
Der Statuscode (Element 0) kann folgende Werte annehmen:
</p>
<pre>
    -40  (LUT2_NOT_INITIALIZED)       &quot;die Programmbibliothek wurde noch nicht initialisiert&quot;
    -38  (LUT2_PARTIAL_OK)            &quot;es wurden nicht alle Blocks geladen&quot;
     -5  (INVALID_BLZ_LENGTH)         &quot;die Bankleitzahl ist nicht achtstellig&quot;
     -4  (INVALID_BLZ)                &quot;die Bankleitzahl ist ungültig&quot;
      1  (OK)                         &quot;ok&quot;
</pre>
<p>
Anmerkung: Falls der Statuscode LUT2_PARTIAL_OK ist, wurden bei der
Initialisierung nicht alle Blocks geladen (oder es sind nicht alle
verfügbar); die entsprechenden Elemente haben dann den Wert nil.
</p>
					

					
					<div class="method-source-code"
						id="bank-alles-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 799</span>
799:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_alles</span>(*<span class="ruby-identifier">args</span>)
800:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_alles</span>(*<span class="ruby-identifier">args</span>)
801:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-bic-method" class="method-detail ">
				<a name="method-c-bank_bic"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_bic</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_bic">KontoCheck::bank_bic</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_bic">KontoCheckRaw::bank_bic</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert den BIC (Bank Identifier Code) einer Bank. Im
Fehlerfall wird nil zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="bank-bic-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 716</span>
716:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_bic</span>(*<span class="ruby-identifier">args</span>)
717:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_bic</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
718:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-filialen-method" class="method-detail ">
				<a name="method-c-bank_filialen"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_filialen</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_filialen">KontoCheck::bank_filialen(blz)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_filialen">KontoCheckRaw::bank_filialen(blz)</a></tt></h5>
<p>
Diese Funktion liefert die Anzahl Filialen einer Bank (inklusive
Hauptstelle). Die LUT-Datei muß dazu natürlich mit den Filialdaten
generiert sein, sonst wird für alle Banken nur 1 zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="bank-filialen-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 655</span>
655:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_filialen</span>(*<span class="ruby-identifier">args</span>)
656:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_filialen</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
657:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-loeschung-method" class="method-detail ">
				<a name="method-c-bank_loeschung"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_loeschung</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_loeschung">KontoCheck::bank_loeschung</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_loeschung">KontoCheckRaw::bank_loeschung</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert das Lösch-Flag für eine Bank zurück (als Integer;
mögliche Werte sind 0 und 1); im Fehlerfall wird nil zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="bank-loeschung-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 736</span>
736:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_loeschung</span>(*<span class="ruby-identifier">args</span>)
737:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_loeschung</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
738:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-nachfolge-blz-method" class="method-detail ">
				<a name="method-c-bank_nachfolge_blz"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_nachfolge_blz</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_nachfolge_blz">KontoCheck::bank_nachfolge_blz</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_nachfolge_blz">KontoCheckRaw::bank_nachfolge_blz</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert die Nachfolge-BLZ für eine Bank, die gelöscht
werden soll (bei der das &#8216;Löschung&#8217; Flag 1 ist).
</p>
					

					
					<div class="method-source-code"
						id="bank-nachfolge-blz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 745</span>
745:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_nachfolge_blz</span>(*<span class="ruby-identifier">args</span>)
746:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_nachfolge_blz</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
747:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-name-method" class="method-detail ">
				<a name="method-c-bank_name"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_name</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_name">KontoCheck::bank_name</a>(blz[,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_name">KontoCheckRaw::bank_name</a>(blz[,filiale])</tt></h5>
<p>
Diese Funktion liefert den Namen einer Bank, oder nil im Fehlerfall.
</p>
					

					
					<div class="method-source-code"
						id="bank-name-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 664</span>
664:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_name</span>(*<span class="ruby-identifier">args</span>)
665:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_name</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
666:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-name-kurz-method" class="method-detail ">
				<a name="method-c-bank_name_kurz"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_name_kurz</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_name_kurz">KontoCheck::bank_name_kurz</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_name_kurz">KontoCheckRaw::bank_name_kurz</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert den Kurznamen einer Bank, oder nil im Fehlerfall.
</p>
					

					
					<div class="method-source-code"
						id="bank-name-kurz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 673</span>
673:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_name_kurz</span>(*<span class="ruby-identifier">args</span>)
674:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_name_kurz</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
675:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-nr-method" class="method-detail ">
				<a name="method-c-bank_nr"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_nr</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_nr">KontoCheck::bank_nr</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_nr">KontoCheckRaw::bank_nr</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert die laufende Nummer einer Bank (internes Feld der
BLZ-Datei). Der Wert wird wahrscheinlich nicht oft benötigt, ist aber der
Vollständigkeit halber enthalten.
</p>
					

					
					<div class="method-source-code"
						id="bank-nr-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 764</span>
764:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_nr</span>(*<span class="ruby-identifier">args</span>)
765:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_nr</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
766:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-ort-method" class="method-detail ">
				<a name="method-c-bank_ort"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_ort</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_ort">KontoCheck::bank_ort</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_ort">KontoCheckRaw::bank_ort</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert den Ort einer Bank. Falls der Parameter filiale
nicht angegeben ist, wird der Sitz der Hauptstelle ausgegeben. Im
Fehlerfall wird für den Ort nil zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="bank-ort-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 684</span>
684:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_ort</span>(*<span class="ruby-identifier">args</span>)
685:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_ort</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
686:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-pan-method" class="method-detail ">
				<a name="method-c-bank_pan"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_pan</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_pan">KontoCheck::bank_pan</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_pan">KontoCheckRaw::bank_pan</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert den PAN (Primary Account Number) einer Bank.
</p>
					

					
					<div class="method-source-code"
						id="bank-pan-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 754</span>
754:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_pan</span>(*<span class="ruby-identifier">args</span>)
755:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_pan</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
756:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-plz-method" class="method-detail ">
				<a name="method-c-bank_plz"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_plz</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_plz">KontoCheck::bank_plz</a>(blz [,filiale])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_plz">KontoCheckRaw::bank_plz</a>(blz [,filiale])</tt></h5>
<p>
Diese Funktion liefert die Postleitzahl einer Bank. Falls der Parameter
filiale nicht angegeben ist, wird die PLZ der Hauptstelle ausgegeben. Im
Fehlerfall wird für die PLZ nil zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="bank-plz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 695</span>
695:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_plz</span>(*<span class="ruby-identifier">args</span>)
696:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_plz</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
697:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-pz-method" class="method-detail ">
				<a name="method-c-bank_pz"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_pz</span><span
						class="method-args">(blz)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-bank_pz">KontoCheck::bank_pz(blz)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_pz">KontoCheckRaw::bank_pz(blz)</a></tt></h5>
<p>
Diese Funktion liefert die Prüfziffer einer Bank. Die Funktion
unterstützt keine Filialen; zu jeder BLZ kann es in der LUT-Datei nur eine
Prüfziffermethode geben.
</p>
					

					
					<div class="method-source-code"
						id="bank-pz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 706</span>
706:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_pz</span>(<span class="ruby-identifier">blz</span>)
707:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_pz</span>(<span class="ruby-identifier">blz</span>).<span class="ruby-identifier">first</span>
708:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-valid-method" class="method-detail ">
				<a name="method-c-bank_valid"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_valid</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h4><tt><a href="KontoCheck.html#method-c-bank_valid">KontoCheck::bank_valid</a>(blz [,filiale])</tt></h4>
<h6><tt><a href="KontoCheckRaw.html#method-c-bank_valid">KontoCheckRaw::bank_valid</a>(blz [,filiale])</tt></h6>
<h6><tt><a href="KontoCheck.html#method-c-bank_valid%3F">KontoCheck::bank_valid?</a>(blz [,filiale])</tt></h6>
<p>
Diese Funktion testet, ob eine gegebene BLZ gültig ist. Der Rückgabewert
ist ein Statuscode mit den unten angegebenen Werten. Falls das Argument
filiale auch angegeben ist, wird zusätzlich noch getestet, ob eine Filiale
mit dem gegebenen Index existiert.
</p>
<p>
Mögliche Rückgabewerte sind:
</p>
<pre>
    -55  (LUT2_INDEX_OUT_OF_RANGE)    &quot;Der Index für die Filiale ist ungültig&quot;
    -53  (LUT2_BLZ_NOT_INITIALIZED)   &quot;Das Feld BLZ wurde nicht initialisiert&quot;
     -5  (INVALID_BLZ_LENGTH)         &quot;die Bankleitzahl ist nicht achtstellig&quot;
     -4  (INVALID_BLZ)                &quot;die Bankleitzahl ist ungültig&quot;
      1  (OK)                         &quot;ok&quot;</pre>
					

					
					<div class="method-source-code"
						id="bank-valid-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 633</span>
633:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_valid</span>(*<span class="ruby-identifier">args</span>)
634:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_valid</span>(*<span class="ruby-identifier">args</span>)
635:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="bank-valid--method" class="method-detail ">
				<a name="method-c-bank_valid%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">bank_valid?</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h4><tt><a href="KontoCheck.html#method-c-bank_valid%3F">KontoCheck::bank_valid?</a>(blz [,filiale])</tt></h4>
<h6><tt><a href="KontoCheckRaw.html#method-c-bank_valid">KontoCheckRaw::bank_valid</a>(blz [,filiale])</tt></h6>
<h6><tt><a href="KontoCheck.html#method-c-bank_valid">KontoCheck::bank_valid</a>(blz [,filiale])</tt></h6>
<p>
Dies ist eine convenience function zu <a
href="KontoCheck.html#method-c-bank_valid">KontoCheck::bank_valid()</a>. Es
wird getestet, ob die gegebene BLZ (und evl. noch der Filialindex) gültig
ist. Der Rückgabewert ist nur true oder false.
</p>
					

					
					<div class="method-source-code"
						id="bank-valid--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 644</span>
644:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bank_valid?</span>(*<span class="ruby-identifier">args</span>)
645:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">bank_valid</span>(*<span class="ruby-identifier">args</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
646:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="current-init-level-method" class="method-detail ">
				<a name="method-c-current_init_level"></a>

				<div class="method-heading">
				
					<span class="method-name">current_init_level</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-current_init_level">KontoCheck::current_init_level()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-current_lutfile_name">KontoCheckRaw::current_lutfile_name()</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-current_lutfile_name">KontoCheckRaw::current_lutfile_name()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-current_lutfile_set">KontoCheck::current_lutfile_set()</a></tt></h5>
<p>
Diese Funktion bestimmt den aktuell benutzten Initialisierungslevel
</p>
					

					
					<div class="method-source-code"
						id="current-init-level-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 485</span>
485:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_init_level</span>()
486:       <span class="ruby-identifier">raw_results</span> = <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">current_lutfile_name</span>()
487:       <span class="ruby-identifier">raw_results</span>[<span class="ruby-value">2</span>]
488:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="current-lutfile-name-method" class="method-detail ">
				<a name="method-c-current_lutfile_name"></a>

				<div class="method-heading">
				
					<span class="method-name">current_lutfile_name</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-current_lutfile_name">KontoCheck::current_lutfile_name()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-current_lutfile_name">KontoCheckRaw::current_lutfile_name()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-current_lutfile_set">KontoCheck::current_lutfile_set()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-current_init_level">KontoCheck::current_init_level()</a></tt></h5>
<p>
Diese Funktion bestimmt den Dateinamen der zur Initialisierung benutzten
LUT-Datei.
</p>
					

					
					<div class="method-source-code"
						id="current-lutfile-name-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 462</span>
462:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_lutfile_name</span>()
463:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">current_lutfile_name</span>().<span class="ruby-identifier">first</span>
464:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="current-lutfile-set-method" class="method-detail ">
				<a name="method-c-current_lutfile_set"></a>

				<div class="method-heading">
				
					<span class="method-name">current_lutfile_set</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-current_lutfile_set">KontoCheck::current_lutfile_set()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-current_lutfile_name">KontoCheckRaw::current_lutfile_name()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-current_lutfile_name">KontoCheck::current_lutfile_name()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-current_init_level">KontoCheck::current_init_level()</a></tt></h5>
<p>
Diese Funktion bestimmt das Set der LUT-Datei, das bei der Initialisierung
benutzt wurde.
</p>
					

					
					<div class="method-source-code"
						id="current-lutfile-set-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 473</span>
473:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">current_lutfile_set</span>()
474:       <span class="ruby-identifier">raw_results</span> = <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">current_lutfile_name</span>()
475:       <span class="ruby-identifier">raw_results</span>[<span class="ruby-value">1</span>]
476:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="dump-lutfile-method" class="method-detail ">
				<a name="method-c-dump_lutfile"></a>

				<div class="method-heading">
				
					<span class="method-name">dump_lutfile</span><span
						class="method-args">(filename)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-dump_lutfile">KontoCheck::dump_lutfile(lutfile)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-dump_lutfile">KontoCheckRaw::dump_lutfile(lutfile)</a></tt></h5>
<p>
Diese Funktion liefert detaillierte Informationen über alle Blocks, die in
der LUT-Datei gespeichert sind, sowie noch einige Internas der LUT-Datei.
Im Fehlerfall wird nil zurückgegeben.
</p>
					

					
					<div class="method-source-code"
						id="dump-lutfile-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 125</span>
125:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dump_lutfile</span>(<span class="ruby-identifier">filename</span>)
126:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">dump_lutfile</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">first</span>
127:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="encoding-method" class="method-detail ">
				<a name="method-c-encoding"></a>

				<div class="method-heading">
				
					<span class="method-name">encoding</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-encoding">KontoCheck::encoding</a>([mode])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-encoding">KontoCheckRaw::encoding</a>([mode])</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-encoding_str">KontoCheck::encoding_str</a>([mode])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-keep_raw_data">KontoCheckRaw::keep_raw_data(mode)</a></tt></h5>
<p>
Diese Funktion legt den benutzten Zeichensatz für Fehlermeldungen durch
die Funktion <a
href="KontoCheck.html#method-c-retval2txt">KontoCheck::retval2txt()</a> und
einige Felder der LUT-Datei (Name, Kurzname, Ort) fest. Wenn die Funktion
nicht aufgerufen wird, wird der Wert DEFAULT_ENCODING aus konto_check.h
benutzt.
</p>
<p>
<em>Achtung</em>: Das Verhalten der Funktion hängt von dem Flag
keep_raw_data der C-Bibliothek ab. Falls das Flag gesetzt ist, werden die
Rohdaten der Blocks Name, Kurzname und Ort im Speicher gehalten; bei einem
Wechsel der Kodierung wird auch für diese Blocks die Kodierung umgesetzt.
Falls das Flag nicht gesetzt ist, sollte die Funktion <b>vor</b> der
Initialisierung aufgerufen werden, da in dem Fall die Daten der LUT-Datei
nur bei der Initialisierung konvertiert werden. Mit der Funktion <a
href="KontoCheckRaw.html#method-c-keep_raw_data">KontoCheckRaw::keep_raw_data()</a>
kann das Flag gesetzt oder gelöscht werden.
</p>
<p>
Für den Parameter mode werden die folgenden Werte akzeptiert (die Strings
sind nicht case sensitiv; Mi oder mI oder MI ist z.B. auch möglich; wird
der Parameter nicht angegeben, wird die aktuelle Kodierung ausgegeben):
</p>
<pre>
   0:            aktuelle Kodierung ausgeben
   1,  'i', 'I': ISO-8859-1
   2,  'u', 'U': UTF-8
   3,  'h', 'H': HTML
   4,  'd', 'D': DOS CP 850
   51, 'mi':     ISO-8859-1, Makro für Fehlermeldungen
   52, 'mu':     UTF-8, Makro für Fehlermeldungen
   53, 'mh':     HTML, Makro für Fehlermeldungen
   54, 'md':     DOS CP 850, Makro für Fehlermeldungen
</pre>
<p>
Rückgabewert ist die aktuelle Kodierung als Integer (falls zwei
Kodierungen angegeben sind, ist die erste die der Statusmeldungen, die
zweite die der LUT-Blocks):
</p>
<pre>
    0:  &quot;noch nicht spezifiziert&quot; (vor der Initialisierung)
    1:  &quot;ISO-8859-1&quot;;
    2:  &quot;UTF-8&quot;;
    3:  &quot;HTML entities&quot;;
    4:  &quot;DOS CP 850&quot;;
    12: &quot;ISO-8859-1/UTF-8&quot;;
    13: &quot;ISO-8859-1/HTML&quot;;
    14: &quot;ISO-8859-1/DOS CP 850&quot;;
    21: &quot;UTF-8/ISO-8859-1&quot;;
    23: &quot;UTF-8/HTML&quot;;
    24: &quot;UTF-8/DOS CP-850&quot;;
    31: &quot;HTML entities/ISO-8859-1&quot;;
    32: &quot;HTML entities/UTF-8&quot;;
    34: &quot;HTML entities/DOS CP-850&quot;;
    41: &quot;DOS CP-850/ISO-8859-1&quot;;
    42: &quot;DOS CP-850/UTF-8&quot;;
    43: &quot;DOS CP-850/HTML&quot;;
    51: &quot;Makro/ISO-8859-1&quot;;
    52: &quot;Makro/UTF-8&quot;;
    53: &quot;Makro/HTML&quot;;
    54: &quot;Makro/DOS CP 850&quot;;</pre>
					

					
					<div class="method-source-code"
						id="encoding-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 188</span>
188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encoding</span>(*<span class="ruby-identifier">args</span>)
189:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">encoding</span>(*<span class="ruby-identifier">args</span>)
190:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="encoding-str-method" class="method-detail ">
				<a name="method-c-encoding_str"></a>

				<div class="method-heading">
				
					<span class="method-name">encoding_str</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-encoding_str">KontoCheck::encoding_str</a>([mode])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-encoding_str">KontoCheckRaw::encoding_str</a>([mode])</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-encoding">KontoCheck::encoding</a>([mode])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-keep_raw_data">KontoCheckRaw::keep_raw_data(mode)</a></tt></h5>
<p>
Diese Funktion entspricht der Funktion <a
href="KontoCheck.html#method-c-encoding">KontoCheck::encoding()</a>.
Allerdings ist der Rückgabewert nicht numerisch, sondern ein String, der
die aktuelle Kodierung angibt. Die folgenden Rückgabewerte sind möglich
(falls zwei Kodierungen angegeben sind, ist die erste die der
Statusmeldungen, die zweite die der LUT-Blocks):
</p>
<pre>
     
    &quot;noch nicht spezifiziert&quot; (vor der Initialisierung)
    &quot;ISO-8859-1&quot;;
    &quot;UTF-8&quot;;
    &quot;HTML entities&quot;;
    &quot;DOS CP 850&quot;;
    &quot;ISO-8859-1/UTF-8&quot;;
    &quot;ISO-8859-1/HTML&quot;;
    &quot;ISO-8859-1/DOS CP 850&quot;;
    &quot;UTF-8/ISO-8859-1&quot;;
    &quot;UTF-8/HTML&quot;;
    &quot;UTF-8/DOS CP-850&quot;;
    &quot;HTML entities/ISO-8859-1&quot;;
    &quot;HTML entities/UTF-8&quot;;
    &quot;HTML entities/DOS CP-850&quot;;
    &quot;DOS CP-850/ISO-8859-1&quot;;
    &quot;DOS CP-850/UTF-8&quot;;
    &quot;DOS CP-850/HTML&quot;;
    &quot;Makro/ISO-8859-1&quot;;
    &quot;Makro/UTF-8&quot;;
    &quot;Makro/HTML&quot;;
    &quot;Makro/DOS CP 850&quot;;</pre>
					

					
					<div class="method-source-code"
						id="encoding-str-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 225</span>
225:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">encoding_str</span>(*<span class="ruby-identifier">args</span>)
226:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">encoding_str</span>(*<span class="ruby-identifier">args</span>)
227:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="free-method" class="method-detail ">
				<a name="method-c-free"></a>

				<div class="method-heading">
				
					<span class="method-name">free</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-free">KontoCheck::free()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-free">KontoCheckRaw::free()</a></tt></h5>
<p>
Diese Funktion gibt allen allokierten Speicher wieder frei.
</p>
					

					
					<div class="method-source-code"
						id="free-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 494</span>
494:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">free</span>()
495:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">free</span>()
496:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="generate-lutfile-method" class="method-detail ">
				<a name="method-c-generate_lutfile"></a>

				<div class="method-heading">
				
					<span class="method-name">generate_lutfile</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-generate_lutfile">KontoCheck::generate_lutfile</a>(inputfile,outputfile [,user_info [,gueltigkeit [,felder [,filialen [,set [,iban_file]]]]]])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-generate_lutfile">KontoCheckRaw::generate_lutfile</a>(inputfile,outputfile [,user_info [,gueltigkeit [,felder [,filialen [,set [,iban_file]]]]]])</tt></h5>
<p>
Diese Funktion generiert eine neue LUT-Datei aus der BLZ-Datei der
Deutschen Bundesbank. Die folgenden Parameter werden unterstützt:
</p>
<ul>
<li><p>
inputfile: Eingabedatei (Textdatei) der Bundesbank
</p>
</li>
<li><p>
outputfile: Name der Ausgabedatei
</p>
</li>
<li><p>
user_info: Info-String der in die LUT-Datei geschrieben wird (frei
wählbar; wird in den Info-Block aufgenommen)
</p>
</li>
<li><p>
gueltigkeit: Gültigkeit des Datensatzes im Format JJJJMMTT-JJJJMMTT. Diese
Angabe wird benutzt, um festzustellen, ob ein Datensatz aktuell noch
gültig ist.
</p>
</li>
<li><p>
felder: (0-9) Welche Daten aufgenommmen werden sollen (PZ steht in der
folgenden Tabelle für Prüfziffer, NAME_NAME_KURZ ist ein Block, der
sowohl den Namen als auch den Kurznamen der Bank enthält; dieser läßt
sich besser komprimieren als wenn beide Blocks getrennt sind):
</p>
<pre>
 0. BLZ,PZ
 1. BLZ,PZ,NAME_KURZ
 2. BLZ,PZ,NAME_KURZ,BIC
 3. BLZ,PZ,NAME,PLZ,ORT
 4. BLZ,PZ,NAME,PLZ,ORT,BIC
 5. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC
 6. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ
 7. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG
 8. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG,LOESCHUNG
 9. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG,LOESCHUNG,PAN,NR
</pre>
</li>
<li><p>
filialen: (0 oder 1) Flag, ob nur die Daten der Hauptstellen (0) oder auch
die der Filialen aufgenommen werden sollen
</p>
</li>
<li><p>
set (0, 1 oder 2): Datensatz-Nummer. Jede LUT-Datei kann zwei Datensätze
enthalten. Falls bei der Initialisierung nicht ein bestimmter Datensatz
ausgewählt wird, wird derjenige genommen, der (laut Gültigkeitsstring)
aktuell gültig ist.
</p>
</li>
<li><p>
iban_file: Datei der Banken, die einer Selbstberechnung des IBAN nicht
zugestimmt haben. Näheres dazu (inklusive Weblink) findet sich bei der
Funktion <a
href="KontoCheckRaw.html#method-c-iban_gen">KontoCheckRaw::iban_gen</a>(blz,kto).
</p>
</li>
</ul>
<p>
Mögliche Rückgabewerte:
</p>
<pre>
   -112  (KTO_CHECK_UNSUPPORTED_COMPRESSION) &quot;die notwendige Kompressions-Bibliothek wurden beim Kompilieren nicht eingebunden&quot;
    -57  (LUT2_GUELTIGKEIT_SWAPPED)   &quot;Im Gültigkeitsdatum sind Anfangs- und Enddatum vertauscht&quot;
    -56  (LUT2_INVALID_GUELTIGKEIT)   &quot;Das angegebene Gültigkeitsdatum ist ungültig (Soll: JJJJMMTT-JJJJMMTT)&quot;
    -32  (LUT2_COMPRESS_ERROR)        &quot;Fehler beim Komprimieren eines LUT-Blocks&quot;
    -31  (LUT2_FILE_CORRUPTED)        &quot;Die LUT-Datei ist korrumpiert&quot;
    -30  (LUT2_NO_SLOT_FREE)          &quot;Im Inhaltsverzeichnis der LUT-Datei ist kein Slot mehr frei&quot;
    -15  (INVALID_BLZ_FILE)           &quot;Fehler in der blz.txt Datei (falsche Zeilenlänge)&quot;
    -11  (FILE_WRITE_ERROR)           &quot;kann Datei nicht schreiben&quot;
    -10  (FILE_READ_ERROR)            &quot;kann Datei nicht lesen&quot;
     -9  (ERROR_MALLOC)               &quot;kann keinen Speicher allokieren&quot;
     -7  (INVALID_LUT_FILE)           &quot;die blz.lut Datei ist inkosistent/ungültig&quot;
      1  (OK)                         &quot;ok&quot;
      7  (LUT1_FILE_GENERATED)        &quot;ok; es wurde allerdings eine LUT-Datei im alten Format (1.0/1.1) generiert&quot;</pre>
					

					
					<div class="method-source-code"
						id="generate-lutfile-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 345</span>
345:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">generate_lutfile</span>(*<span class="ruby-identifier">args</span>)
346:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">generate_lutfile</span>(*<span class="ruby-identifier">args</span>)
347:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="iban-bic-method" class="method-detail ">
				<a name="method-c-iban2bic"></a>

				<div class="method-heading">
				
					<span class="method-name">iban2bic</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-iban2bic">KontoCheck::iban2bic(iban)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-iban2bic">KontoCheckRaw::iban2bic(iban)</a></tt></h5>
<p>
Diese Funktion bestimmt zu einer (deutschen!) IBAN den zugehörigen BIC
(Bank Identifier Code). Der BIC wird für eine EU-Standard-Überweisung im
SEPA-Verfahren (Single Euro Payments Area) benötigt; für die deutschen
Banken ist er in der BLZ-Datei enthalten. Nähere Infos gibt es z.B. unter
<a href="http://www.bic-code.de/">www.bic-code.de/</a> .
</p>
					

					
					<div class="method-source-code"
						id="iban-bic-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 812</span>
812:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iban2bic</span>(*<span class="ruby-identifier">args</span>)
813:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">iban2bic</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
814:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="iban-check-method" class="method-detail ">
				<a name="method-c-iban_check"></a>

				<div class="method-heading">
				
					<span class="method-name">iban_check</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-iban_check">KontoCheck::iban_check(iban)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-iban_check">KontoCheckRaw::iban_check(iban)</a></tt></h5>
<p>
Diese Funktion testet einen IBAN. Dabei wird sowohl die Prüfziffer des
IBAN getestet als auch (bei deutschen Konten) die Prüfziffer der
Bankverbindung (aus der Kontonummer). Diese Funktion gibt nur den globalen
Status zurück; bei der Funktion <a
href="KontoCheckRaw.html#method-c-iban_check">KontoCheckRaw::iban_check()</a>
kann man zusätzlich noch den Status der Kontenprüfung abfragen.
</p>
<p>
Mögliche Rückgabewerte sind:
</p>
<pre>
    -67  (IBAN_OK_KTO_NOT)            &quot;Die Prüfziffer der IBAN stimmt, die der Kontonummer nicht&quot;
    -66  (KTO_OK_IBAN_NOT)            &quot;Die Prüfziffer der Kontonummer stimmt, die der IBAN nicht&quot;
      0  (FALSE)                      &quot;falsch&quot;
      1  (OK)                         &quot;ok&quot;</pre>
					

					
					<div class="method-source-code"
						id="iban-check-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 832</span>
832:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iban_check</span>(*<span class="ruby-identifier">args</span>)
833:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">iban_check</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
834:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="iban-gen-method" class="method-detail ">
				<a name="method-c-iban_gen"></a>

				<div class="method-heading">
				
					<span class="method-name">iban_gen</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-iban_gen">KontoCheck::iban_gen</a>(kto,blz)</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-iban_gen">KontoCheckRaw::iban_gen</a>(kto,blz)</tt></h5>
<p>
Diese Funktion generiert aus (deutscher) BLZ und Konto einen IBAN. Hierbei
ist zu beachten, daß nicht alle Banken der Selbstberechnung zugestimmt
haben. Es gibt von den Sparkassen eine Liste dieser Institute; sie ist auch
in der LUT-Datei mit der ID 22 (1. Eigene IBAN) enthalten. Bei diesen
Banken wird - falls der Block in der LUT-Datei enthalten ist - keine
Berechnung durchgeführt, sondern die Status-Variable auf
NO_OWN_IBAN_CALCULATION gesetzt. 
</p>
<p>
Alle Banken der Liste erzeugen eine Statusmeldung mit dem Wert
OK_UNTERKONTO_ATTACHED, OK_UNTERKONTO_POSSIBLE oder OK_UNTERKONTO_GIVEN.
Falls einer dieser Stauswerte zurückgegeben wird, ist somit immer Vorsicht
geboten; der generierte IBAN sollte direkt bei dem zugehörigen Institut
überprüft werden.
</p>
<p>
Hier ein Auszug aus der Anleitung des SEPA Account Converters:
</p>
<p>
Der SEPA Account Converter ist so eingestellt, dass nur Kontoverbindungen
in IBAN und BIC umgerechnet werden, bei denen das ausgebende Kreditinstitut
der Umrechnung zugestimmt hat. Kreditinstitute, welche einer Umrechnung
nicht zugestimmt haben und welche zum Teil spezielle, dem SEPA Account
Converter nicht bekannte Umrechnungs- methoden verwenden, sind in der Datei
&#8220;CONFIG.INI&#8221; hinterlegt. Durch Löschen der Datei
&#8220;CONFIG.INI&#8221; aus dem Programmverzeichnis haben Sie die
Möglichkeit, eine Umrechnung für alle Konten durchzuführen. Bitte
beachten Sie dabei, dass die so erhaltenen IBAN und BIC fehlerhaft sein
können und deshalb mit ihren Kunden zu überprüfen sind.
</p>
<p>
Weblinks:
</p>
<pre>
     https://www.sparkasse-rhein-neckar-nord.de/pdf/content/sepa/kurzanleitung.pdf
     https://www.sparkasse-rhein-neckar-nord.de/firmenkunden/internationales_geschaeft/sepa/vorteile/index.php
     https://www.sparkasse-rhein-neckar-nord.de/firmenkunden/internationales_geschaeft/sepa/vorteile/sepa_account_converter.msi
</pre>
<p>
Es ist möglich, sowohl die Prüfung auf Stimmigkeit der Kontonummer als
auch auf Zulässigkeit der Selbstberechnung zu deaktivieren. Falls die IBAN
trotz fehlender Zustimmung der Bank berechnet werden, ist vor die BLZ ein @
zu setzen; falls auch bei falscher Bankverbindung ein IBAN berechnet werden
soll, ist vor die BLZ ein + zu setzen. Um beide Prüfungen zu deaktiviern,
kann @+ (oder +@) vor die BLZ gesetzt werden. Die so erhaltenen IBANs sind
dann i.A. allerdings wohl nicht gültig.
</p>
<p>
Rückgabewert ist der generierte IBAN oder nil, falls ein Fehler
aufgetreten ist. Die genauere Fehlerursache läßt sich mit der Funktion <a
href="KontoCheckRaw.html#method-c-iban_gen">KontoCheckRaw::iban_gen()</a>
feststellen.
</p>
					

					
					<div class="method-source-code"
						id="iban-gen-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 880</span>
880:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">iban_gen</span>(*<span class="ruby-identifier">args</span>)
881:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">iban_gen</span>(*<span class="ruby-identifier">args</span>).<span class="ruby-identifier">first</span>
882:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="init-method" class="method-detail ">
				<a name="method-c-init"></a>

				<div class="method-heading">
				
					<span class="method-name">init</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-init">KontoCheck::init</a>([&lt;p1&gt;[,&lt;p2&gt;[,&lt;set&gt;]]])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-init">KontoCheckRaw::init</a>([&lt;p1&gt;[,&lt;p2&gt;[,&lt;set&gt;]]])</tt></h5>
<p>
Die Variablen p1 und p2 stehen für level und lutfile (in beliebiger
Reihenfolge); die Zuordnung der beiden Parameter erfolgt on the fly durch
eine Typüberprüfung.
</p>
<p>
Diese Funktion initialisiert die Bibliothek und lädt die gewünschten
Datenblocks in den Speicher. Alle Argumente sind optional; in konto_check.h
werden die Defaultwerte definiert.
</p>
<p>
Die beiden ersten Parameter sind der Dateiname und der
Initialisierungslevel. Der Dateiname ist immer als String anzugeben, der
Initialisierungslevel immer als Zahl, ansonsten wird eine TypeError
Exception geworfen. Auf diese Weise ist es problemlos möglich
festzustellen, wie die Parameter p1 und p2 den Variablen lutfile und level
zuzuordnen sind.
</p>
<p>
Für die LUT-Datei ist als Defaultwert sowohl für den Pfad als auch den
Dateinamen eine Liste möglich, die sequenziell abgearbeitet wird; diese
wird in konto_check.h spezifiziert (Compilerzeit-Konstante der
C-Bibliothek). Die folgenden Werte sind in der aktuellen konto_check.h
definiert:
</p>
<pre>
   DEFAULT_LUT_NAME blz.lut, blz.lut2f, blz.lut2
   DEFAULT_LUT_PATH ., /usr/local/etc/, /etc/, /usr/local/bin/, /opt/konto_check/ (für nicht-Windows-Systeme)
   DEFAULT_LUT_PATH ., C:\\, C:\\Programme\\konto_check  (für Windows-Systeme)
</pre>
<p>
Der Defaultwert für level ist ebenfalls in konto_check.h definiert; in der
aktuellen Version ist er 5. Bei diesem Level werden die Blocks BLZ,
Prüfziffer, Name, Kurzname, PLZ, Ort und BIC geladen.
</p>
<p>
Falls der Parameter set nicht angegeben ist, wird versucht, das aktuell
gültige Set aus dem Systemdatum und dem Gültigkeitszeitraum der in der
LUT-Datei gespeicherten Sets zu bestimmen.
</p>
<p>
Hier noch einmal ein Überblick über die Parameter:
</p>
<ul>
<li><p>
lutfile: die LUT-Datei, mit der initialisiert werden soll
</p>
</li>
<li><p>
level: (0-9) Welche Daten geladen werden sollen (PZ steht in der folgenden
Tabelle für Prüfziffer, NAME_NAME_KURZ ist ein Block, der sowohl den
Namen als auch den Kurznamen der Bank enthält; dieser läßt sich besser
komprimieren als wenn beide Blocks getrennt sind):
</p>
<pre>
 0. BLZ,PZ
 1. BLZ,PZ,NAME_KURZ
 2. BLZ,PZ,NAME_KURZ,BIC
 3. BLZ,PZ,NAME,PLZ,ORT
 4. BLZ,PZ,NAME,PLZ,ORT,BIC
 5. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC
 6. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ
 7. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG
 8. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG,LOESCHUNG
 9. BLZ,PZ,NAME_NAME_KURZ,PLZ,ORT,BIC,NACHFOLGE_BLZ,AENDERUNG,LOESCHUNG,PAN,NR
</pre>
</li>
<li><p>
set (1 oder 2): Datensatz
</p>
</li>
</ul>
<p>
Mögliche Rückgabewerte:
</p>
<pre>
   -112  (KTO_CHECK_UNSUPPORTED_COMPRESSION) &quot;die notwendige Kompressions-Bibliothek wurden beim Kompilieren nicht eingebunden&quot;
    -64  (INIT_FATAL_ERROR)        &quot;Initialisierung fehlgeschlagen (init_wait geblockt)&quot;
    -63  (INCREMENTAL_INIT_NEEDS_INFO)            &quot;Ein inkrementelles Initialisieren benötigt einen Info-Block in der LUT-Datei&quot;
    -62  (INCREMENTAL_INIT_FROM_DIFFERENT_FILE)   &quot;Ein inkrementelles Initialisieren mit einer anderen LUT-Datei ist nicht möglich&quot;
    -38  (LUT2_PARTIAL_OK)         &quot;es wurden nicht alle Blocks geladen&quot;
    -36  (LUT2_Z_MEM_ERROR)        &quot;Memory error in den ZLIB-Routinen&quot;
    -35  (LUT2_Z_DATA_ERROR)       &quot;Datenfehler im komprimierten LUT-Block&quot;
    -34  (LUT2_BLOCK_NOT_IN_FILE)  &quot;Der Block ist nicht in der LUT-Datei enthalten&quot;
    -33  (LUT2_DECOMPRESS_ERROR)   &quot;Fehler beim Dekomprimieren eines LUT-Blocks&quot;
    -31  (LUT2_FILE_CORRUPTED)     &quot;Die LUT-Datei ist korrumpiert&quot;
    -20  (LUT_CRC_ERROR)           &quot;Prüfsummenfehler in der blz.lut Datei&quot;
    -10  (FILE_READ_ERROR)         &quot;kann Datei nicht lesen&quot;
     -9  (ERROR_MALLOC)            &quot;kann keinen Speicher allokieren&quot;
     -7  (INVALID_LUT_FILE)        &quot;die blz.lut Datei ist inkosistent/ungültig&quot;
     -6  (NO_LUT_FILE)             &quot;die blz.lut Datei wurde nicht gefunden&quot;

      1  (OK)                      &quot;ok&quot;
      6  (LUT1_SET_LOADED)         &quot;Die Datei ist im alten LUT-Format (1.0/1.1)&quot;
</pre>
<p>
Anmerkung: Falls der Statuscode LUT2_PARTIAL_OK ist, waren bei der
Initialisierung nicht alle Blocks in der LUT-Datei enthalten.
</p>
					

					
					<div class="method-source-code"
						id="init-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 423</span>
423:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init</span>(*<span class="ruby-identifier">args</span>)
424:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">init</span>(*<span class="ruby-identifier">args</span>)
425:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="ipi-check-method" class="method-detail ">
				<a name="method-c-ipi_check"></a>

				<div class="method-heading">
				
					<span class="method-name">ipi_check</span><span
						class="method-args">(zweck)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-ipi_check">KontoCheck::ipi_check(zweck)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-ipi_check">KontoCheckRaw::ipi_check(zweck)</a></tt></h5>
<p>
Die Funktion testet, ob ein Strukturierter Verwendungszweck gültig ist
(Anzahl Zeichen, Prüfziffer). Der Rückgabewert ist true oder false.
</p>
					

					
					<div class="method-source-code"
						id="ipi-check-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 905</span>
905:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipi_check</span>(<span class="ruby-identifier">zweck</span>)
906:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">ipi_check</span>(<span class="ruby-identifier">zweck</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
907:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="ipi-gen-method" class="method-detail ">
				<a name="method-c-ipi_gen"></a>

				<div class="method-heading">
				
					<span class="method-name">ipi_gen</span><span
						class="method-args">(zweck)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-ipi_gen">KontoCheck::ipi_gen(zweck)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-ipi_gen">KontoCheckRaw::ipi_gen(zweck)</a></tt></h5>
<p>
Diese Funktion generiert einen &#8220;Strukturierten
Verwendungszweck&#8221; für SEPA-Überweisungen. Der Rückgabewert ist der
Strukturierte Verwendungszweck als String oder nil, falls ein Fehler
aufgetreten ist.
</p>
<p>
Der String für den Strukturierten Verwendungszweck darf maximal 18 Byte
lang sein und nur alphanumerische Zeichen enthalten (also auch keine
Umlaute). Die Funktion <a
href="KontoCheckRaw.html#method-c-ipi_gen">KontoCheckRaw::ipi_gen()</a>
gibt einen Statuscode zurück, der etwas nähere Infos im Fehlerfall
enthält.
</p>
					

					
					<div class="method-source-code"
						id="ipi-gen-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 895</span>
895:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ipi_gen</span>(<span class="ruby-identifier">zweck</span>)
896:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">ipi_gen</span>(<span class="ruby-identifier">zweck</span>).<span class="ruby-identifier">first</span>
897:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="konto-check-method" class="method-detail ">
				<a name="method-c-konto_check"></a>

				<div class="method-heading">
				
					<span class="method-name">konto_check</span><span
						class="method-args">(blz,kto)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check</a>(blz,kto)</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check">KontoCheckRaw::konto_check</a>(blz,kto)</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-valid">KontoCheck::valid</a>(blz,kto)</tt></h5>
<p>
Test, ob eine BLZ/Konto-Kombination eine gültige Prüfziffer enthält. Die
Funktion gibt einen skalaren Statuswert zurück, der das Ergebnis der
Prüfung enthält. Mögliche Rückgabewerte sind:
</p>
<pre>
   -69  MISSING_PARAMETER       &quot;Bei der Kontoprüfung fehlt ein notwendiger Parameter (BLZ oder Konto)&quot;
   -40  LUT2_NOT_INITIALIZED    &quot;die Programmbibliothek wurde noch nicht initialisiert&quot;
        
   -77  BAV_FALSE               &quot;BAV denkt, das Konto ist falsch (konto_check hält es für richtig)&quot;
   -29  UNDEFINED_SUBMETHOD     &quot;Die (Unter)Methode ist nicht definiert&quot;
   -12  INVALID_KTO_LENGTH      &quot;ein Konto muß zwischen 1 und 10 Stellen haben&quot;
    -5  INVALID_BLZ_LENGTH      &quot;die Bankleitzahl ist nicht achtstellig&quot;
    -4  INVALID_BLZ             &quot;die Bankleitzahl ist ungültig&quot;
    -3  INVALID_KTO             &quot;das Konto ist ungültig&quot;
    -2  NOT_IMPLEMENTED         &quot;die Methode wurde noch nicht implementiert&quot;
    -1  NOT_DEFINED             &quot;die Methode ist nicht definiert&quot;
     0  FALSE                   &quot;falsch&quot;
     1  OK                      &quot;ok&quot;
     2  OK_NO_CHK               &quot;ok, ohne Prüfung&quot;</pre>
					

					
					<div class="method-source-code"
						id="konto-check-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 519</span>
519:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">konto_check</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
520:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
521:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="konto-check--method" class="method-detail ">
				<a name="method-c-konto_check%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">konto_check?</span><span
						class="method-args">(blz,kto)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-konto_check%3F">KontoCheck::konto_check?</a>(blz, kto)</tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check</a>(blz,kto)</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check">KontoCheckRaw::konto_check</a>(blz,kto)</tt></h5>
<p>
Test, ob eine BLZ/Konto-Kombination eine gültige Prüfziffer enthält. Die
Funktion gibt einen skalaren Statuswert zurück, der das Ergebnis der
Prüfung enthält. Mögliche Rückgabewerte sind einfach true und false
(convenience function für <a
href="KontoCheck.html#method-c-konto_check">konto_check</a>()).
</p>
					

					
					<div class="method-source-code"
						id="konto-check--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 540</span>
540:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">konto_check?</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
541:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
542:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="konto-check-pz-method" class="method-detail ">
				<a name="method-c-konto_check_pz"></a>

				<div class="method-heading">
				
					<span class="method-name">konto_check_pz</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-konto_check_pz">KontoCheck::konto_check_pz</a>(pz,kto[,blz])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check_pz">KontoCheckRaw::konto_check_pz</a>(pz,kto[,blz])</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-valid_pz">KontoCheck::valid_pz</a>(pz,kto[,blz])</tt></h5>
<p>
Diese Funktion testet, ob eine gegebene Prüfziffer/Kontonummer-Kombination
gültig ist.
</p>
<p>
Der zusätzliche Parameter blz ist nur für die Verfahren 52, 53, B6 und C0
notwendig; bei diesen Verfahren geht die BLZ in die Berechnung der
Prüfziffer ein. Bei allen anderen Prüfzifferverfahren wird er ignoriert.
Wird er bei einem dieser Verfahren nicht angegeben, wird stattdessen eine
Test-BLZ eingesetzt.
</p>
<p>
Die Funktion gibt einen skalaren Statuswert zurück, der das Ergebnis der
Prüfung enthält. Mögliche Rückgabewerte sind:
</p>
<pre>
   -69  (MISSING_PARAMETER)       &quot;bei der Kontoprüfung fehlt ein notwendiger Parameter (BLZ oder Konto)&quot;
   -40  (LUT2_NOT_INITIALIZED)    &quot;die Programmbibliothek wurde noch nicht initialisiert&quot;

   -77  (BAV_FALSE)               &quot;BAV denkt, das Konto ist falsch (konto_check hält es für richtig)&quot;
   -29  (UNDEFINED_SUBMETHOD)     &quot;die (Unter)Methode ist nicht definiert&quot;
   -12  (INVALID_KTO_LENGTH)      &quot;ein Konto muß zwischen 1 und 10 Stellen haben&quot;
    -3  (INVALID_KTO)             &quot;das Konto ist ungültig&quot;
    -2  (NOT_IMPLEMENTED)         &quot;die Methode wurde noch nicht implementiert&quot;
    -1  (NOT_DEFINED)             &quot;die Methode ist nicht definiert&quot;
     0  (FALSE)                   &quot;falsch&quot;
     1  (OK)                      &quot;ok&quot;
     2  (OK_NO_CHK)               &quot;ok, ohne Prüfung&quot;</pre>
					

					
					<div class="method-source-code"
						id="konto-check-pz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 579</span>
579:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">konto_check_pz</span>(*<span class="ruby-identifier">args</span>)
580:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check_pz</span>(*<span class="ruby-identifier">args</span>)
581:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="konto-check-pz--method" class="method-detail ">
				<a name="method-c-konto_check_pz%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">konto_check_pz?</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-konto_check_pz%3F">KontoCheck::konto_check_pz?</a>(pz,kto[,blz])</tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check_pz">KontoCheckRaw::konto_check_pz</a>(pz,kto[,blz])</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-valid_pz%3F">KontoCheck::valid_pz?</a>(pz,kto[,blz])</tt></h5>
<p>
Diese Funktion testet, ob eine gegebene Prüfziffer/Kontonummer-Kombination
gültig ist. Der Rückgabewert dieser Funktion ist true oder false
(convenience function für <a
href="KontoCheck.html#method-c-konto_check_pz">KontoCheck::konto_check_pz()</a>).
</p>
<p>
Der zusätzliche Parameter blz ist nur für die Verfahren 52, 53, B6 und C0
notwendig; bei diesen Verfahren geht die BLZ in die Berechnung der
Prüfziffer ein. Bei allen anderen Prüfzifferverfahren wird er ignoriert.
Wird er bei einem dieser Verfahren nicht angegeben, wird stattdessen eine
Test-BLZ eingesetzt.
</p>
					

					
					<div class="method-source-code"
						id="konto-check-pz--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 595</span>
595:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">konto_check_pz?</span>(*<span class="ruby-identifier">args</span>)
596:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check_pz</span>(*<span class="ruby-identifier">args</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
597:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="load-bank-data-method" class="method-detail ">
				<a name="method-c-load_bank_data"></a>

				<div class="method-heading">
				
					<span class="method-name">load_bank_data</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-load_bank_data">KontoCheck::load_bank_data(<datafile>)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-load_bank_data">KontoCheckRaw::load_bank_data(<datafile>)</a></tt></h5>
<p>
Diese Funktion war die alte Initialisierungsroutine für <a
href="KontoCheck.html#method-c-konto_check">konto_check</a>; es ist nun
durch die Funktionen <a
href="KontoCheck.html#method-c-init">KontoCheck::init()</a> und <a
href="KontoCheck.html#method-c-generate_lutfile">KontoCheck::generate_lutfile()</a>
ersetzt. Zur Initialisierung  benutzte sie die Textdatei der Deutschen
Bundesbank und generiertge daraus eine LUT-Datei, die dann von der
Initialisierungsroutine der C-Bibliothek benutzt wurde.
</p>
<p>
Die init() Funktion ist wesentlich schneller (7..20 mal so schnell) und hat
eine Reihe weiterer Vorteile. So ist es z.B. möglich, zwwei Datensätze
mit unterschiedlichem Gültigkeitszeitraum in einer Datei zu halten und den
jeweils gültigen Satz automatisch (nach der Systemzeit) auswählen zu
lassen. Die einzelnen Datenblocks (Bankleitzahlen, Prüfziffermethoden,
PLZ, Ort&#8230;) sind in der LUT-Datei in jeweils unabhängigen Blocks
gespeichert und können einzeln geladen werden; die Bankdatei von der
Deutschen Bundesbank enthält alle Felder in einem linearen Format, so daß
einzelne Blocks nicht unabhängig von anderen geladen werden können.
</p>
<p>
Die Funktion <a
href="KontoCheck.html#method-c-load_bank_data">load_bank_data</a>() wird
nur noch als ein schibbolet benutzt, um zu testen, ob jemand das alte
Interface benutzt. Bei der Routine <a
href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check()</a>
wurde die Reihenfolge der Parameter getauscht, so daß man in dem Falle den
alten Code umstellen muß.
</p>
					

					
					<div class="method-source-code"
						id="load-bank-data-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 451</span>
451:    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_bank_data</span>(*<span class="ruby-identifier">args</span>)
452:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">load_bank_data</span>(*<span class="ruby-identifier">args</span>)
453:    <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lut-info-method" class="method-detail ">
				<a name="method-c-lut_info"></a>

				<div class="method-heading">
				
					<span class="method-name">lut_info</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-lut_info">KontoCheck::lut_info()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info</a>([lutfile])</tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-lut_info1">KontoCheck::lut_info1(lutfile)</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-lut_info2">KontoCheck::lut_info2(lutfile)</a></tt></h5>
<p>
Diese Funktion liefert den Infoblock des Datensatzes zurück, der mittels
init() in den Speichergeladen wurde. Weitere Infos über die LUT-Datei
lassen sich mit der Funktion <a
href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info()</a>
sowie <a
href="KontoCheck.html#method-c-dump_lutfile">KontoCheck::dump_lutfile()</a>
erhalten.
</p>
					

					
					<div class="method-source-code"
						id="lut-info-source">
<pre>
    <span class="ruby-comment cmt"># File lib/konto_check.rb, line 87</span>
87:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lut_info</span>()
88:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">lut_info</span>()[<span class="ruby-value">3</span>]
89:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lut-info--method" class="method-detail ">
				<a name="method-c-lut_info1"></a>

				<div class="method-heading">
				
					<span class="method-name">lut_info1</span><span
						class="method-args">(filename)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-lut_info1">KontoCheck::lut_info1(<lutfile>)</a></tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-lut_info">KontoCheck::lut_info()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-lut_info2">KontoCheck::lut_info2()</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info()</a></tt></h5>
<p>
Diese Funktion liefert den Infoblock des ersten Datensatzes der angegebenen
LUT-Datei zurück. Weitere Infos über die LUT-Datei lassen sich mit der
Funktion <a
href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info()</a>
sowie <a
href="KontoCheck.html#method-c-dump_lutfile">KontoCheck::dump_lutfile()</a>
erhalten.
</p>
					

					
					<div class="method-source-code"
						id="lut-info--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 100</span>
100:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lut_info1</span>(<span class="ruby-identifier">filename</span>)
101:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">lut_info</span>(<span class="ruby-identifier">filename</span>)[<span class="ruby-value">3</span>]
102:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="lut-info--method" class="method-detail ">
				<a name="method-c-lut_info2"></a>

				<div class="method-heading">
				
					<span class="method-name">lut_info2</span><span
						class="method-args">(filename)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-lut_info2">KontoCheck::lut_info2(lutfile)</a></tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-lut_info">KontoCheck::lut_info()</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-lut_info1">KontoCheck::lut_info1(lutfile)</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info</a>([lutfile])</tt></h5>
<p>
Diese Funktion liefert den Infoblock des zweiten Datensatzes der
angegebenen LUT-Datei zurück. Weitere Infos über die LUT-Datei lassen
sich mit der Funktion <a
href="KontoCheckRaw.html#method-c-lut_info">KontoCheckRaw::lut_info()</a>
sowie <a
href="KontoCheck.html#method-c-dump_lutfile">KontoCheck::dump_lutfile()</a>
erhalten.
</p>
					

					
					<div class="method-source-code"
						id="lut-info--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 113</span>
113:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">lut_info2</span>(<span class="ruby-identifier">filename</span>)
114:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">lut_info</span>(<span class="ruby-identifier">filename</span>)[<span class="ruby-value">4</span>]
115:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-dos-method" class="method-detail ">
				<a name="method-c-retval2dos"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2dos</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2dos">KontoCheck::retval2dos(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2dos">KontoCheckRaw::retval2dos(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen String.
Der benutzte Zeichensatz ist cp850 (DOS).
</p>
					

					
					<div class="method-source-code"
						id="retval-dos-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 281</span>
281:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2dos</span>(<span class="ruby-identifier">retval</span>)
282:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2dos</span>(<span class="ruby-identifier">retval</span>)
283:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-html-method" class="method-detail ">
				<a name="method-c-retval2html"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2html</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2html">KontoCheck::retval2html(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2html">KontoCheckRaw::retval2html(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen String.
Für Umlaute werden HTML-Entities benutzt.
</p>
					

					
					<div class="method-source-code"
						id="retval-html-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 291</span>
291:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2html</span>(<span class="ruby-identifier">retval</span>)
292:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2html</span>(<span class="ruby-identifier">retval</span>)
293:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-iso-method" class="method-detail ">
				<a name="method-c-retval2iso"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2iso</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2iso">KontoCheck::retval2iso(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2iso">KontoCheckRaw::retval2iso(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen String.
Der benutzte Zeichensatz ist ISO 8859-1. 
</p>
					

					
					<div class="method-source-code"
						id="retval-iso-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 247</span>
247:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2iso</span>(<span class="ruby-identifier">retval</span>)
248:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2iso</span>(<span class="ruby-identifier">retval</span>)
249:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-txt-method" class="method-detail ">
				<a name="method-c-retval2txt"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2txt</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2txt">KontoCheck::retval2txt(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2txt">KontoCheckRaw::retval2txt(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen String.
Der benutzte Zeichensatz wird über die Funktion <a
href="KontoCheck.html#method-c-encoding">KontoCheck::encoding()</a>
festgelegt. Falls diese Funktion nicht aufgerufen wurde, wird der Wert des
Makros DEFAULT_ENCODING aus konto_check.h benutzt.
</p>
					

					
					<div class="method-source-code"
						id="retval-txt-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 237</span>
237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2txt</span>(<span class="ruby-identifier">retval</span>)
238:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2txt</span>(<span class="ruby-identifier">retval</span>)
239:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-txt-kurz-method" class="method-detail ">
				<a name="method-c-retval2txt_kurz"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2txt_kurz</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2txt_kurz">KontoCheck::retval2txt_kurz(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2txt_short">KontoCheckRaw::retval2txt_short(retval)</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-retval2txt_short">KontoCheck::retval2txt_short(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen kurzen
String. Die Ausgabe ist der Makroname, wie er in C benutzt wird. Die
Funktion ist ein Alias zu <a
href="KontoCheck.html#method-c-retval2txt_short">KontoCheck::retval2txt_short()</a>.
</p>
					

					
					<div class="method-source-code"
						id="retval-txt-kurz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 271</span>
271:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2txt_kurz</span>(<span class="ruby-identifier">retval</span>)
272:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2txt_short</span>(<span class="ruby-identifier">retval</span>)
273:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-txt-short-method" class="method-detail ">
				<a name="method-c-retval2txt_short"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2txt_short</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2txt_short">KontoCheck::retval2txt_short(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2txt_short">KontoCheckRaw::retval2txt_short(retval)</a></tt></h5>
<h5><tt><a href="KontoCheck.html#method-c-retval2txt_kurz">KontoCheck::retval2txt_kurz(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen kurzen
String. Die Ausgabe ist der Makroname, wie er in C benutzt wird.
</p>
					

					
					<div class="method-source-code"
						id="retval-txt-short-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 258</span>
258:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2txt_short</span>(<span class="ruby-identifier">retval</span>)
259:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2txt_short</span>(<span class="ruby-identifier">retval</span>)
260:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="retval-utf--method" class="method-detail ">
				<a name="method-c-retval2utf8"></a>

				<div class="method-heading">
				
					<span class="method-name">retval2utf8</span><span
						class="method-args">(retval)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-retval2utf8">KontoCheck::retval2utf8(retval)</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-retval2utf8">KontoCheckRaw::retval2utf8(retval)</a></tt></h5>
<p>
Diese Funktion konvertiert einen numerischen Rückgabewert in einen String.
Der benutzte Zeichensatz ist UTF-8.
</p>
					

					
					<div class="method-source-code"
						id="retval-utf--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 301</span>
301:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retval2utf8</span>(<span class="ruby-identifier">retval</span>)
302:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">retval2utf8</span>(<span class="ruby-identifier">retval</span>)
303:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="suche-method" class="method-detail ">
				<a name="method-c-suche"></a>

				<div class="method-heading">
				
					<span class="method-name">suche</span><span
						class="method-args">(options={})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-suche">KontoCheck::suche()</a></tt></h3>
<h5><tt>KontoCheck::search()</tt></h5>
<h5><tt>KontoCheck::<a href="KontoCheck.html#SEARCH_KEYS">SEARCH_KEYS</a></tt></h5>
<h5><tt>KontoCheck::<a href="KontoCheck.html#SEARCH_KEY_MAPPINGS">SEARCH_KEY_MAPPINGS</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_bic">KontoCheckRaw::bank_suche_bic(search_bic)</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_blz">KontoCheckRaw::bank_suche_blz</a>(blz1[,blz2])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_namen">KontoCheckRaw::bank_suche_namen(name)</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_namen_kurz">KontoCheckRaw::bank_suche_namen_kurz(short_name)</a></tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_plz">KontoCheckRaw::bank_suche_plz</a>(plz1[,plz2])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_pz">KontoCheckRaw::bank_suche_pz</a>(pz1[,pz2])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-bank_suche_ort">KontoCheckRaw::bank_suche_ort(suchort)</a></tt></h5>
<p>
Diese Funktion sucht alle Banken, die auf bestimmte Suchmuster passen.
Momentan sind nur grundlegende Suchfunktionen eingebaut, und es wird auch
nur die Suche nach einem Kriterium unterstützt; in einer späteren Version
werden die Möglichkeiten noch erweitert werden.
</p>
<p>
Eine Suche ist möglich nach den Schlüsseln BIC, Bankleitzahl,
Postleitzahl, Prüfziffer, Ort, Name oder Kurzname. Bei den
alphanumerischen Feldern (BIC, Ort, Name, Kurzname) ist der Suchschlüssel
der Wortanfang des zu suchenden Feldes (ohne Unterscheidung zwischen Groß-
und Kleinschreibung); bei den numerischen Feldern (BLZ, PLZ, Prüfziffer)
ist die Suche nach einem bestimmten Wert oder nach einem Wertebereich
möglich; dieser wird dann angegeben als Array mit zwei Elementen. Der
Rückgabewert ist jeweils ein Array mit den Bankleitzahlen, oder nil falls
die Suche fehlschlug. Die Ursache für eine fehlgeschlagene Suche läßt
sich nur mit den Funktionen der <a
href="KontoCheckRaw.html">KontoCheckRaw</a> Bibliothek näher lokalisieren.
</p>
<p>
Die Funktion KontoCheck::search() ist ein Alias für die Funktion <a
href="KontoCheck.html#method-c-suche">KontoCheck::suche()</a>.
</p>
<p>
Die möglichen Suchschlüssel sind in den Variablen KontoCheck::SEARCH_KEYS
definiert; in der Variablen KontoCheck::SEARCH_KEY_MAPPINGS finden sich
noch einige Aliasdefinitionen zu den Suchschlüsseln.
</p>
<p>
Hier einige Beispiele möglicher Suchaufrufe:
</p>
<pre>
   s=KontoCheck::suche( :blz =&gt; [13051172,13070172] )        BLZ-Bereich
   s=KontoCheck::suche( :blz =&gt; [13051172,13070172,333] )    überzählige Array-Elemente werden ignoriert
   s=KontoCheck::suche( :bic =&gt; 'genodef1wi' )   BIC Teilstring
   s=KontoCheck::suche( :plz =&gt; [68100,68200] )  PLZ-Bereich
   s=KontoCheck::suche( :pz =&gt; 90 )              Prüfziffer numerisch
   s=KontoCheck::suche( :pz =&gt; '90' )            Prüfziffer als String
   s=KontoCheck::suche( :pz =&gt; ['95',98] )       Prüfzifferbereich gemischt String/numerisch auch möglich
   s=KontoCheck::suche( :name =&gt; 'postbank' ) 
   s=KontoCheck::suche( :ort =&gt; 'lingenfeld' )</pre>
					

					
					<div class="method-source-code"
						id="suche-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 956</span>
956:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">suche</span>(<span class="ruby-identifier">options</span>={})
957:       <span class="ruby-identifier">key</span>   = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_sym</span>
958:       <span class="ruby-identifier">value</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">key</span>]
959:       <span class="ruby-identifier">key</span> = <span class="ruby-constant">SEARCH_KEY_MAPPINGS</span>[<span class="ruby-identifier">key</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-constant">SEARCH_KEY_MAPPINGS</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">key</span>)
960:       <span class="ruby-identifier">raise</span> <span class="ruby-value str">'search key not supported'</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">SEARCH_KEYS</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">key</span>)
961:       <span class="ruby-identifier">raw_results</span> = <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">send</span>(<span class="ruby-node">&quot;bank_suche_#{key}&quot;</span>, <span class="ruby-identifier">value</span>)
962:       <span class="ruby-identifier">raw_results</span>[<span class="ruby-value">1</span>]
963:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="valid-method" class="method-detail ">
				<a name="method-c-valid"></a>

				<div class="method-heading">
				
					<span class="method-name">valid</span><span
						class="method-args">(blz,kto)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-valid">KontoCheck::valid</a>(blz,kto)</tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check</a>(blz,kto)</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check">KontoCheckRaw::konto_check</a>(blz,kto)</tt></h5>
<p>
Dies ist ein Alias für die Funktion <a
href="KontoCheck.html#method-c-konto_check">KontoCheck::konto_check()</a>
</p>
					

					
					<div class="method-source-code"
						id="valid-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 528</span>
528:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">valid</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
529:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
530:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="valid--method" class="method-detail ">
				<a name="method-c-valid%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">valid?</span><span
						class="method-args">(blz,kto)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-valid%3F">KontoCheck::valid?</a>(blz, kto)</tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-valid">KontoCheck::valid</a>(blz, kto)</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check">KontoCheckRaw::konto_check</a>(blz, kto)</tt></h5>
<p>
Dies ist einn Alias für die Funktion <a
href="KontoCheck.html#method-c-konto_check%3F">KontoCheck::konto_check?</a>.
Mögliche Rückgabewerte sind true oder false.
</p>
					

					
					<div class="method-source-code"
						id="valid--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 549</span>
549:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">valid?</span>(<span class="ruby-identifier">blz</span>,<span class="ruby-identifier">kto</span>)
550:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check</span>(<span class="ruby-identifier">blz</span>, <span class="ruby-identifier">kto</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
551:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="valid-pz-method" class="method-detail ">
				<a name="method-c-valid_pz"></a>

				<div class="method-heading">
				
					<span class="method-name">valid_pz</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-valid_pz">KontoCheck::valid_pz</a>(pz,kto[,blz])</tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-konto_check_pz">KontoCheck::konto_check_pz</a>(pz,kto[,blz])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check_pz">KontoCheckRaw::konto_check_pz</a>(pz,kto[,blz])</tt></h5>
<p>
Diese Funktion ist ein Alias für <a
href="KontoCheck.html#method-c-konto_check_pz">KontoCheck::konto_check_pz</a>
</p>
					

					
					<div class="method-source-code"
						id="valid-pz-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 604</span>
604:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">valid_pz</span>(*<span class="ruby-identifier">args</span>)
605:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check_pz</span>(*<span class="ruby-identifier">args</span>)
606:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="valid-pz--method" class="method-detail ">
				<a name="method-c-valid_pz%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">valid_pz?</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-valid_pz%3F">KontoCheck::valid_pz?</a>(pz,kto[,blz])</tt></h3>
<h5><tt><a href="KontoCheck.html#method-c-valid_pz">KontoCheck::valid_pz</a>(pz,kto[,blz])</tt></h5>
<h5><tt><a href="KontoCheckRaw.html#method-c-konto_check_pz">KontoCheckRaw::konto_check_pz</a>(pz,kto[,blz])</tt></h5>
<p>
Diese Funktion ist ein Alias für <a
href="KontoCheck.html#method-c-konto_check_pz%3F">KontoCheck::konto_check_pz?()</a>
</p>
					

					
					<div class="method-source-code"
						id="valid-pz--source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 613</span>
613:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">valid_pz?</span>(*<span class="ruby-identifier">args</span>)
614:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">konto_check_pz</span>(*<span class="ruby-identifier">args</span>)<span class="ruby-operator">&gt;</span><span class="ruby-value">0</span><span class="ruby-operator">?</span><span class="ruby-keyword kw">true</span><span class="ruby-operator">:</span><span class="ruby-keyword kw">false</span>
615:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="version-method" class="method-detail ">
				<a name="method-c-version"></a>

				<div class="method-heading">
				
					<span class="method-name">version</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<h3><tt><a href="KontoCheck.html#method-c-version">KontoCheck::version()</a></tt></h3>
<h5><tt><a href="KontoCheckRaw.html#method-c-version">KontoCheckRaw::version()</a></tt></h5>
<p>
Diese Funktion gibt den Versions-String der C-Bibliothek zurück.
</p>
					

					
					<div class="method-source-code"
						id="version-source">
<pre>
     <span class="ruby-comment cmt"># File lib/konto_check.rb, line 970</span>
970:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">version</span>()
971:       <span class="ruby-constant">KontoCheckRaw</span><span class="ruby-operator">::</span><span class="ruby-identifier">version</span>()
972:     <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

